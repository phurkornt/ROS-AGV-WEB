<%- include("../partials/header") %>


<script src="nav2d.js"></script>

  <div class="container">
    <div class="card mt-3" style="width: 100%;">
        <div class="card-body">
          <h5 class="card-title text-center fs-2 fw-bolder">Navigation System Map : <%= name_map %></h5>
        </div>
  </div>


  <div class="container mt-3">
    
    <div class="row">
      
      <div class="col-lg-6 col-md-6 ">

        <div class="card mt-3"  >
          
          <% if (  posNow == 0 ) { %>
            
            

            <div class="card-body">
              <h5 class="card-title">Configure</h5>
              <p>Plan : <%= name_room %></p>
              <table class="table table-striped mt-2 border-top text-center">
                <thead class="thead-dark">
                    <th scope="col">Order</th>
                    <th scope="col">Name</th>
                    <th scope="col">color</th>
                    <th scope="col">Stop at point</th>

                </thead>
                <tbody >
                  <% let n = 0; %>
                  <% for(let i of data){%>
                    <% n+=1; %>
                    <tr>
                      <td><%= n %></td>
                      <td><%= i.name %></td>

                      <td>
                        <div class="d-flex justify-content-center">
                          <input type="color"  class="form-control p-0 w-75  "  disabled  value="<%=i.color%>" >
                        </div>
                      </td>
                      
                      <td>
                        <div class="d-flex justify-content-center">
                          <div class="form-check  mb-2">
                            <% if( i.option === 1 ){%>
                              <input class="form-check-input p-2 " type="checkbox"  checked id="" disabled>
                            <%}else if( i.option === 0 ){%>
                              <input class="form-check-input p-2 " type="checkbox"  id="" disabled>
                            <%}%>
                          </div>
                        </div>
                      </td>
                    </tr>
                  <%} %>
                    
                    
                </tbody>
              </table>
              
              

              <button class="btn btn-success  p-3 mt-1 ps-5 pe-5 float-end" onclick="moveTopoint(1)">Start Moving</button>

            </div>  
            
         <% }else{%>

            <div class="card-body">
              <h5 class="card-title">Moving To Pos : <%= posNow %> </h5>
 
            </div>  

            <button class="btn btn-warning p-3 mt-1 ps-5 pe-5 " name="topause" onclick="">Pause</button>

            <button class="btn btn-danger p-3 mt-1 ps-5 pe-5" name="tostop" onclick="">Stop</button>
            
            <div class="mb-5"></div>


         <% }%>

        </div>
        



      </div>

      <div class="col-lg-6 col-md-6">
        <div id="nav" style="text-align: center; " class="mt-3"></div>
      </div>

      
    </div>
  </div>




  <script src="page_nav_map.js"></script>
  <script src="/axios/axios.min.js"></script>

  <script>

    let pos = Number('<%-posNow%>')
    var str =  '<%- JSON.stringify(data)%>';
    str = str.replace(/'/g, '"')
    obj = JSON.parse(str);

    if(pos === 0){
      // console.log("NOT AGAIN");
      show_pos(obj);
    }else{
      // console.log("MOVE AGAIN");
      move_to_pos( obj , {pos:pos,con:"move"} );
    }
    
    function moveTopoint(pos){
      window.location="/navigation/moving/1";
    }

    function delect(){
      return confirm("Are you confirm !");
      
    }


  </script>


<%- include("../partials/footer") %> 


